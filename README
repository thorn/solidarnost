Техническое задание для програмного обеспечения благотворительного фонда "Солидарность"  ПО фонда должно выполнять следующие функции:
* База данных нуждающихся семей
* Оценка степени нужды семьи (вычисляется по формуле)
* База данных волонтеров
* Привязка семьи к волонтеру(опционально)
* Баланс на мобильном кошельке и номере (через API кошельков). Имеется ввиду кошелек фонда.

Статистика:
* Фиксирование оказания помощи семье.
* Фиксирование визитов волонтеров
* Статистика (Кол-во семей и волонтеров по параметрам, оказанная помощь, визиты,)
* Выборочное формирование списков семей для волонтеров

Печать:
* Возможность печати списков
* Возможность печати анкеты

 Опционально
* Отображение семей на карте


Модели
  Семья (отец, дети, опекун и т. д.)
  Волонтеры (users)
  Визиты
  Помощь

Отношения
  У семьи есть волонтер (не обязательно)
  У семьи много помощи
  У семьи много визитов

  У визита есть много волонтеров
  У визита есть помощь
  Визит принадлежит семье

  Помощь принадлежит семье
  Помощь принадлежит визиту


  Модель визита:
    Цель визита (что-то вроде title)
    Описание визита
    Семья визита
    Волонтер(ы) визита
    Дата визита

  Модель помощи
    Описание помощи
    Размер помощи
    Семья, которой оказали помощь
    Волонтеры, которые оказали помощь
    Вид помощи (продуктовая, денежная ...)            ******



Волонтер при входе на сайт будет видеть список семей

Background
  Волонтер приходит в семью (физически)
  Заходит на сайт и видит список семей
  Добавляет новую семью
  Видит страницу новой семьи

Сценарий помощи
  Нажимает "Оказать помощь"
  Указывает описание помощи
  Указывает волонтеров, оказавших помощь
  Указывает тип помощи
  Должна создаться "помощь"
  Должен создаться "визит" с указанием на "помощь"

Сценарий визита
  Нажимает "Новый визит"
  Указывает описание визита
  Указвыает волонтеров, сделавших визит
  Должен создаться визит


Права:
  Волонтер может:
    Добавлять семью
    Редактировать все поля семьи
    Создавать визиты
    Создавать помощь
    Читать все
  Модератор может:
    Все, кроме изменения ролей
  Администратор может:
    Все

+ Внести описание помощи
Внести возможность внесения заявок для оператора на раздачу волонтерам


Абдулаева Индира Махдановна
13.01.1976
Здорова




Различение цветов в зависимости от приоритета
Внести категории образования
Внести категорию, где можно пояснить информацию о ребенке
Внести телефон каждому члену семьи
Сделать возможность посмотреть список детей проще
Починить поиск детей по образованию, добавить поиск по описанию для членов семьи
Определять уровень дохода, исходя из цифры, сообщенной пенсионным фондом
Поделить общий доход на членов семьи
Ввести изменяемые размеры доходов семьи

Внести возможность ввода индивидуального идентификационного номера



?? Ввести вещи, в которых есть нужда периодически, возможность указать период

?? Не удалять нужные вещи, после удовлетворения в их потребности


1. Добавить к тому, что может "располагаться" поле position_group
2. Добавить настройку - расположение, атрибуты которой выглядят следующим образом:
group_name   name    value     start      end          amount
Раскладка    row      col     colspan   rowspan       position
Выборка расположения
Setting.layout.select("name as row, value as column, amount as position, start as colspan, settings.end as rowspan").order(:name, :value, :amount)
+-----+--------+----------+---------+---------+
| row | column | position | colspan | rowspan |
+-----+--------+----------+---------+---------+
| 1   | 1      | 1        | 1       | 3       |
| 1   | 2      | 1        | 1       | 3       |
| 1   | 3      | 1        | 1       | 1       |
| 2   | 1      | 1        | 1       | 1       |
| 3   | 1      | 1        | 1       | 1       |
| 4   | 1      | 1        | 2       | 1       |
| 4   | 2      | 1        | 1       | 1       |
+-----+--------+----------+---------+---------+

v Редактирование интерфейса
 Города
 Фонды
v Выводить такую же раскладку на странице просмотра семьи
v Выводить в редактировании поля, отмеченные как только для администратора, только для администратора.


Сделать что-то вроде уведомления администратору об изменениях в отношении помощи. Нужно, чтобы все администраторы видели нужные изменения, могли хором отмечать их как прочитанные. При этом новости должны быть видны только администраторам

Виды новостей:
  Все
  Оказана помощь
  Совершен визит

Действия с новостями
  Пометить прочитанным   -> возвращение на news_path
  Удалить                -> возвращение на news_path
  Создать

Family.where("id NOT IN (?)", Family.includes(:family_helps).where("family_helps.made_at >= ? and family_helps.made_at <= ?", Date.today - 5, Date.today).map(&:id))

ФИО (в разных ячейках), населенный пункт, адрес, район, номер телефона количество людей




  def gather_info
    @u = User.all
    @info = {
      'families_count' => Family.count,
      'volunteers_count' => @u.count,
      'help_amount' => FamilyHelp.sum(:amount),
      'visits_made' => Visit.count,
      'family_home_need' => Family.search({:home_id_equals => 20}).count,
      'family_resources_need' => Family.search({:resource_id_equals => 16}).count,
      'family_cure_need' => 0,
      'family_source_need' => Family.search({:source_id_equals => 24 }).count,
      'children_without_one_parent' => Family.with_one_parent.count,
      'children_without_two_parents' => Family.with_children.without_mother.without_father.count,
      'children_without_mother' => Family.with_children.without_mother.count,
      'children_without_father' => Family.with_children.without_father.count
    }
  end

    case params[:q]
      when 'families_count'
        redirect_to families_path
      when 'volunteers_count'
        redirect_to admin_users_path
      when 'family_home_need'
        @search = Family.search({:home_id_equals => 20})
      when 'family_resources_need'
        @search = Family.search({:resource_id_equals => 24})
      when 'family_cure_need'
        @search = Family.search()
      when 'family_source_need'
        @search = Family.search({:source_id_equals => 24 })
      when 'children_without_one_parent'
        @families = Family.with_children.with_one_parent
      when 'children_without_two_parents'
        @families = Family.with_children.without_mother.without_father
      when 'children_without_mother'
        @families = Family.with_children.without_mother
      when 'children_without_father'
        @families = Family.with_children.without_father
      else
        @families = Family.all
    end
    if @search
      @families = @search.all
      render 'pages/search'
    end


.row
  .span8
    .row
      .span6
        %h3 Данные
        %h4 Общее количество семей:
        %h4 Общее количество волонтеров:
        %h4 Совершено визитов:
        %h4 Оказано помощи на сумму:
      .span2
        %h3 &nbsp
        %h4= link_to @info['families_count'], statistic_path(:q => 'families_count')
        %h4= link_to @info['volunteers_count'], statistic_path(:q => 'volunteers_count')
        %h4= @info['visits_made']
        %h3= @info['help_amount']
  .span8
    .row
      .span6
        %h3 Семьи
        %h4 Нуждающиеся в срочном лечении
        %h4 Нуждающиеся в денежном обеспечении
        %h4 Без жилья
        %h4 Нуждающиеся в продуктовом обеспечении
      .span2
        %h4 &nbsp
        %h4= link_to @info['family_cure_need'], statistic_path(:q => 'family_cure_need')
        %h4= link_to @info['family_source_need'], statistic_path(:q => 'family_source_need')
        %h4= link_to @info['family_home_need'], statistic_path(:q => 'family_home_need')
        %h4= link_to @info['family_resources_need'], statistic_path(:q => 'family_resources_need')

    .row
      .span6
        %h3 Дети
        %h4 Без одного родителя
        %h4 Без матери
        %h4 Без отца
        %h4 Без обоих родителей
      .span2
        %h3 &nbsp
        %h4= link_to @info['children_without_one_parent'], statistic_path(:q => 'children_without_one_parent')
        %h4= link_to @info['children_without_mother'], statistic_path(:q => 'children_without_mother')
        %h4= link_to @info['children_without_father'], statistic_path(:q => 'children_without_father')
        %h4= link_to @info['children_without_two_parents'], statistic_path(:q => 'children_without_two_parents')
